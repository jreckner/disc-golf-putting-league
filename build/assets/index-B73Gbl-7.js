import{r,q as h,L as c,j as m,b as x,o as C}from"./index-DPadN9BA.js";import{f as y,M as b}from"./index-BaAkndLl.js";const R=new Set(["opacity","clipPath","filter","transform"]),L=r.createContext(null);function E(){const e=r.useRef(!1);return h(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function M(){const e=E(),[t,o]=r.useState(0),s=r.useCallback(()=>{e.current&&o(t+1)},[t]);return[r.useCallback(()=>y.postRender(s),[s]),t]}const G=e=>!e.isLayoutDirty&&e.willUpdate(!1);function d(){const e=new Set,t=new WeakMap,o=()=>e.forEach(G);return{add:s=>{e.add(s),t.set(s,s.addEventListener("willUpdate",o))},remove:s=>{e.delete(s);const n=t.get(s);n&&(n(),t.delete(s)),o()},dirty:o}}const l=e=>e===!0,g=e=>l(e===!0)||e==="id",v=({children:e,id:t,inherit:o=!0})=>{const s=r.useContext(c),n=r.useContext(L),[i,f]=M(),u=r.useRef(null),a=s.id||n;u.current===null&&(g(o)&&a&&(t=t?a+"-"+t:a),u.current={id:t,group:l(o)&&s.group||d()});const p=r.useMemo(()=>({...u.current,forceRender:i}),[f]);return m.jsx(c.Provider,{value:p,children:e})};class w extends b{constructor(){super(...arguments),this.isEnabled=!1}add(t){(x.has(t)||R.has(t))&&(this.isEnabled=!0,this.update())}update(){this.set(this.isEnabled?"transform":"auto")}}function F(){return C(()=>new w("auto"))}export{L as D,v as L,w as W,F as a,R as b,M as u};
