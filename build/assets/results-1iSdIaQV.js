import{ab as W,ac as I,aj as K,b9 as k,ba as T,bb as G,bc as q,bd as F,be as P,bf as V,bg as z,ae as S,af as H,ag as R,ai as J,bh as X,r as U,j as e}from"./index-DPadN9BA.js";import{s as Y,v as Z,r as L,D as ee}from"./default-Dwcu9-NH.js";var te=(function(c){W(h,c);function h(a,r){var t;return t=c.call(this)||this,t.client=a,t.options=r,t.trackedProps=[],t.selectError=null,t.bindMethods(),t.setOptions(r),t}var i=h.prototype;return i.bindMethods=function(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)},i.onSubscribe=function(){this.listeners.length===1&&(this.currentQuery.addObserver(this),A(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())},i.onUnsubscribe=function(){this.listeners.length||this.destroy()},i.shouldFetchOnReconnect=function(){return O(this.currentQuery,this.options,this.options.refetchOnReconnect)},i.shouldFetchOnWindowFocus=function(){return O(this.currentQuery,this.options,this.options.refetchOnWindowFocus)},i.destroy=function(){this.listeners=[],this.clearTimers(),this.currentQuery.removeObserver(this)},i.setOptions=function(r,t){var l=this.options,n=this.currentQuery;if(this.options=this.client.defaultQueryObserverOptions(r),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=l.queryKey),this.updateQuery();var u=this.hasListeners();u&&D(this.currentQuery,n,this.options,l)&&this.executeFetch(),this.updateResult(t),u&&(this.currentQuery!==n||this.options.enabled!==l.enabled||this.options.staleTime!==l.staleTime)&&this.updateStaleTimeout();var o=this.computeRefetchInterval();u&&(this.currentQuery!==n||this.options.enabled!==l.enabled||o!==this.currentRefetchInterval)&&this.updateRefetchInterval(o)},i.getOptimisticResult=function(r){var t=this.client.defaultQueryObserverOptions(r),l=this.client.getQueryCache().build(this.client,t);return this.createResult(l,t)},i.getCurrentResult=function(){return this.currentResult},i.trackResult=function(r,t){var l=this,n={},u=function(f){l.trackedProps.includes(f)||l.trackedProps.push(f)};return Object.keys(r).forEach(function(o){Object.defineProperty(n,o,{configurable:!1,enumerable:!0,get:function(){return u(o),r[o]}})}),(t.useErrorBoundary||t.suspense)&&u("error"),n},i.getNextResult=function(r){var t=this;return new Promise(function(l,n){var u=t.subscribe(function(o){o.isFetching||(u(),o.isError&&r?.throwOnError?n(o.error):l(o))})})},i.getCurrentQuery=function(){return this.currentQuery},i.remove=function(){this.client.getQueryCache().remove(this.currentQuery)},i.refetch=function(r){return this.fetch(I({},r,{meta:{refetchPage:r?.refetchPage}}))},i.fetchOptimistic=function(r){var t=this,l=this.client.defaultQueryObserverOptions(r),n=this.client.getQueryCache().build(this.client,l);return n.fetch().then(function(){return t.createResult(n,l)})},i.fetch=function(r){var t=this;return this.executeFetch(r).then(function(){return t.updateResult(),t.currentResult})},i.executeFetch=function(r){this.updateQuery();var t=this.currentQuery.fetch(this.options,r);return r?.throwOnError||(t=t.catch(K)),t},i.updateStaleTimeout=function(){var r=this;if(this.clearStaleTimeout(),!(k||this.currentResult.isStale||!T(this.options.staleTime))){var t=G(this.currentResult.dataUpdatedAt,this.options.staleTime),l=t+1;this.staleTimeoutId=setTimeout(function(){r.currentResult.isStale||r.updateResult()},l)}},i.computeRefetchInterval=function(){var r;return typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.currentResult.data,this.currentQuery):(r=this.options.refetchInterval)!=null?r:!1},i.updateRefetchInterval=function(r){var t=this;this.clearRefetchInterval(),this.currentRefetchInterval=r,!(k||this.options.enabled===!1||!T(this.currentRefetchInterval)||this.currentRefetchInterval===0)&&(this.refetchIntervalId=setInterval(function(){(t.options.refetchIntervalInBackground||q.isFocused())&&t.executeFetch()},this.currentRefetchInterval))},i.updateTimers=function(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())},i.clearTimers=function(){this.clearStaleTimeout(),this.clearRefetchInterval()},i.clearStaleTimeout=function(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)},i.clearRefetchInterval=function(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)},i.createResult=function(r,t){var l=this.currentQuery,n=this.options,u=this.currentResult,o=this.currentResultState,f=this.currentResultOptions,x=r!==l,g=x?r.state:this.currentQueryInitialState,j=x?this.currentResult:this.previousQueryResult,s=r.state,d=s.dataUpdatedAt,m=s.error,p=s.errorUpdatedAt,b=s.isFetching,v=s.status,C=!1,_=!1,y;if(t.optimisticResults){var E=this.hasListeners(),$=!E&&A(r,t),B=E&&D(r,l,t,n);($||B)&&(b=!0,d||(v="loading"))}if(t.keepPreviousData&&!s.dataUpdateCount&&j?.isSuccess&&v!=="error")y=j.data,d=j.dataUpdatedAt,v=j.status,C=!0;else if(t.select&&typeof s.data<"u")if(u&&s.data===o?.data&&t.select===this.selectFn)y=this.selectResult;else try{this.selectFn=t.select,y=t.select(s.data),t.structuralSharing!==!1&&(y=F(u?.data,y)),this.selectResult=y,this.selectError=null}catch(w){P().error(w),this.selectError=w}else y=s.data;if(typeof t.placeholderData<"u"&&typeof y>"u"&&(v==="loading"||v==="idle")){var N;if(u?.isPlaceholderData&&t.placeholderData===f?.placeholderData)N=u.data;else if(N=typeof t.placeholderData=="function"?t.placeholderData():t.placeholderData,t.select&&typeof N<"u")try{N=t.select(N),t.structuralSharing!==!1&&(N=F(u?.data,N)),this.selectError=null}catch(w){P().error(w),this.selectError=w}typeof N<"u"&&(v="success",y=N,_=!0)}this.selectError&&(m=this.selectError,y=this.selectResult,p=Date.now(),v="error");var M={status:v,isLoading:v==="loading",isSuccess:v==="success",isError:v==="error",isIdle:v==="idle",data:y,dataUpdatedAt:d,error:m,errorUpdatedAt:p,failureCount:s.fetchFailureCount,errorUpdateCount:s.errorUpdateCount,isFetched:s.dataUpdateCount>0||s.errorUpdateCount>0,isFetchedAfterMount:s.dataUpdateCount>g.dataUpdateCount||s.errorUpdateCount>g.errorUpdateCount,isFetching:b,isRefetching:b&&v!=="loading",isLoadingError:v==="error"&&s.dataUpdatedAt===0,isPlaceholderData:_,isPreviousData:C,isRefetchError:v==="error"&&s.dataUpdatedAt!==0,isStale:Q(r,t),refetch:this.refetch,remove:this.remove};return M},i.shouldNotifyListeners=function(r,t){if(!t)return!0;var l=this.options,n=l.notifyOnChangeProps,u=l.notifyOnChangePropsExclusions;if(!n&&!u||n==="tracked"&&!this.trackedProps.length)return!0;var o=n==="tracked"?this.trackedProps:n;return Object.keys(r).some(function(f){var x=f,g=r[x]!==t[x],j=o?.some(function(d){return d===f}),s=u?.some(function(d){return d===f});return g&&!s&&(!o||j)})},i.updateResult=function(r){var t=this.currentResult;if(this.currentResult=this.createResult(this.currentQuery,this.options),this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,!V(this.currentResult,t)){var l={cache:!0};r?.listeners!==!1&&this.shouldNotifyListeners(this.currentResult,t)&&(l.listeners=!0),this.notify(I({},l,r))}},i.updateQuery=function(){var r=this.client.getQueryCache().build(this.client,this.options);if(r!==this.currentQuery){var t=this.currentQuery;this.currentQuery=r,this.currentQueryInitialState=r.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(t?.removeObserver(this),r.addObserver(this))}},i.onQueryUpdate=function(r){var t={};r.type==="success"?t.onSuccess=!0:r.type==="error"&&!z(r.error)&&(t.onError=!0),this.updateResult(t),this.hasListeners()&&this.updateTimers()},i.notify=function(r){var t=this;S.batch(function(){r.onSuccess?(t.options.onSuccess==null||t.options.onSuccess(t.currentResult.data),t.options.onSettled==null||t.options.onSettled(t.currentResult.data,null)):r.onError&&(t.options.onError==null||t.options.onError(t.currentResult.error),t.options.onSettled==null||t.options.onSettled(void 0,t.currentResult.error)),r.listeners&&t.listeners.forEach(function(l){l(t.currentResult)}),r.cache&&t.client.getQueryCache().notify({query:t.currentQuery,type:"observerResultsUpdated"})})},h})(H);function se(c,h){return h.enabled!==!1&&!c.state.dataUpdatedAt&&!(c.state.status==="error"&&h.retryOnMount===!1)}function A(c,h){return se(c,h)||c.state.dataUpdatedAt>0&&O(c,h,h.refetchOnMount)}function O(c,h,i){if(h.enabled!==!1){var a=typeof i=="function"?i(c):i;return a==="always"||a!==!1&&Q(c,h)}return!1}function D(c,h,i,a){return i.enabled!==!1&&(c!==h||a.enabled===!1)&&(!i.suspense||c.state.status!=="error")&&Q(c,i)}function Q(c,h){return c.isStaleByTime(h.staleTime)}function re(){var c=!1;return{clearReset:function(){c=!1},reset:function(){c=!0},isReset:function(){return c}}}var ne=R.createContext(re()),ie=function(){return R.useContext(ne)};function ae(c,h){var i=R.useRef(!1),a=R.useState(0),r=a[1],t=J(),l=ie(),n=t.defaultQueryObserverOptions(c);n.optimisticResults=!0,n.onError&&(n.onError=S.batchCalls(n.onError)),n.onSuccess&&(n.onSuccess=S.batchCalls(n.onSuccess)),n.onSettled&&(n.onSettled=S.batchCalls(n.onSettled)),n.suspense&&(typeof n.staleTime!="number"&&(n.staleTime=1e3),n.cacheTime===0&&(n.cacheTime=1)),(n.suspense||n.useErrorBoundary)&&(l.isReset()||(n.retryOnMount=!1));var u=R.useState(function(){return new h(t,n)}),o=u[0],f=o.getOptimisticResult(n);if(R.useEffect(function(){i.current=!0,l.clearReset();var x=o.subscribe(S.batchCalls(function(){i.current&&r(function(g){return g+1})}));return o.updateResult(),function(){i.current=!1,x()}},[l,o]),R.useEffect(function(){o.setOptions(n,{listeners:!1})},[n,o]),n.suspense&&f.isLoading)throw o.fetchOptimistic(n).then(function(x){var g=x.data;n.onSuccess==null||n.onSuccess(g),n.onSettled==null||n.onSettled(g,null)}).catch(function(x){l.clearReset(),n.onError==null||n.onError(x),n.onSettled==null||n.onSettled(void 0,x)});if(f.isError&&!l.isReset()&&!f.isFetching&&Y(n.suspense,n.useErrorBoundary,[f.error,o.getCurrentQuery()]))throw f.error;return n.notifyOnChangeProps==="tracked"&&(f=o.trackResult(f,n)),f}function le(c,h,i){var a=X(c,h,i);return ae(a,te)}function ce(c){return Z({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"6"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"2"},child:[]}]})(c)}function oe(){const[c,h]=U.useState(null),[i,a]=U.useState(""),{data:r,isLoading:t}=le({queryKey:["results"],queryFn:async()=>(await fetch("https://apis.recknerd.com/dgpl_scores")).json()});if(t)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"text-slate-600",children:"Loading leaderboard..."})});const l=s=>{const d=s.split(" ");if(d.length<2)return"Unknown";const m="*".repeat(d[0].length-1),p="*".repeat(d[1].length-1);return`${d[0][0]}${m} ${d[1][0]}${p}`},n=s=>new Date(s*1e3).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),u=r.reduce((s,d)=>{const m=d.league||"General",p=n(d.created_at);return s[m]||(s[m]={}),s[m][p]||(s[m][p]=[]),s[m][p].push(d),s},{});Object.keys(u).forEach(s=>{Object.keys(u[s]).forEach(d=>{u[s][d].sort((m,p)=>p.total_score-m.total_score)})});const o=Object.keys(u);!i&&o.length>0&&a(o[0]);const f=s=>{a(s)};function x(){const s=o.map(d=>{const m=u[d],p=Object.values(m).flat();return p.sort((b,v)=>v.total_score-b.total_score),{league:d,player:p[0]}});return e.jsx("div",{className:"space-y-4",children:s.map(({league:d,player:m})=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200",children:[e.jsx("div",{className:"bg-gradient-to-r from-amber-50 to-yellow-50 px-4 py-3 border-b border-amber-200",children:e.jsxs("h3",{className:"font-semibold text-slate-700 flex items-center gap-2",children:[e.jsx(L,{className:"w-5 h-5 text-amber-500"}),d.charAt(0).toUpperCase()+d.slice(1)," League Champion"]})}),e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full bg-amber-400 text-white font-bold text-lg",children:"1"}),e.jsx("span",{className:"font-semibold text-lg text-slate-800",children:l(m.name)})]}),e.jsx("button",{onClick:()=>h(m),className:"px-5 py-2 bg-amber-500 hover:bg-amber-600 text-white rounded-lg font-bold transition-colors cursor-pointer ring-2 ring-yellow-400 shadow-lg shadow-amber-300/50",children:m.total_score})]})})]},d))})}function g({player:s}){return e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{className:"bg-slate-50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-sm text-slate-700 mb-3",children:"Left Putts"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600",children:"10ft:"}),e.jsx("span",{className:"font-medium",children:s.left_putt_10ft})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600",children:"20ft:"}),e.jsx("span",{className:"font-medium",children:s.left_putt_20ft})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600",children:"30ft:"}),e.jsx("span",{className:"font-medium",children:s.left_putt_30ft})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600",children:"40ft:"}),e.jsx("span",{className:"font-medium",children:s.left_putt_40ft})]})]})]}),e.jsxs("div",{className:"bg-slate-50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-sm text-slate-700 mb-3",children:"Center Putts"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600",children:"10ft:"}),e.jsx("span",{className:"font-medium",children:s.center_putt_10ft})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600",children:"20ft:"}),e.jsx("span",{className:"font-medium",children:s.center_putt_20ft})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600",children:"30ft:"}),e.jsx("span",{className:"font-medium",children:s.center_putt_30ft})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600",children:"40ft:"}),e.jsx("span",{className:"font-medium",children:s.center_putt_40ft})]})]})]}),e.jsxs("div",{className:"bg-slate-50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-sm text-slate-700 mb-3",children:"Right Putts"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600",children:"10ft:"}),e.jsx("span",{className:"font-medium",children:s.right_putt_10ft})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600",children:"20ft:"}),e.jsx("span",{className:"font-medium",children:s.right_putt_20ft})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600",children:"30ft:"}),e.jsx("span",{className:"font-medium",children:s.right_putt_30ft})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600",children:"40ft:"}),e.jsx("span",{className:"font-medium",children:s.right_putt_40ft})]})]})]})]})}function j({league:s}){return e.jsx("div",{className:"space-y-6",children:Object.entries(u[s]).map(([d,m])=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200",children:[e.jsx("div",{className:"bg-slate-100 px-4 py-2 border-b border-slate-200",children:e.jsx("h3",{className:"font-semibold text-slate-700",children:d})}),e.jsx("div",{className:"divide-y divide-slate-200",children:m.map((p,b)=>e.jsxs("div",{className:`flex items-center justify-between px-4 py-3 transition-colors ${b===0?"bg-gradient-to-r from-amber-50 to-yellow-50 hover:from-amber-100 hover:to-yellow-100 border-l-4 border-amber-400":"hover:bg-slate-50"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`flex items-center justify-center w-8 h-8 rounded-full font-semibold text-sm ${b===0?"bg-amber-400 text-white":"bg-slate-200 text-slate-600"}`,children:b+1}),b===0&&e.jsx(L,{className:"w-5 h-5 text-amber-500"}),e.jsx("span",{className:"font-medium text-slate-800",children:l(p.name)})]}),e.jsx("button",{onClick:()=>h(p),className:`px-4 py-2 text-white rounded-lg font-semibold transition-colors cursor-pointer ${b===0?"bg-amber-500 hover:bg-amber-600 ring-2 ring-yellow-400 shadow-lg shadow-amber-300/50":"hover:opacity-90"}`,style:b!==0?{backgroundColor:"#732FDF"}:{},children:p.total_score})]},p.email))})]},d))})}return e.jsx("div",{className:"min-h-screen bg-background",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(ce,{className:"w-8 h-8 text-emerald-600"}),e.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Putting Leaderboard"})]})}),e.jsxs("div",{className:"md:hidden mb-6",children:[e.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-2",children:[e.jsx("button",{onClick:()=>f("winners"),className:`px-4 py-2 rounded-lg font-medium whitespace-nowrap transition-colors ${i==="winners"?"text-white":"bg-white text-slate-700 hover:bg-slate-100"}`,style:i==="winners"?{backgroundColor:"#732FDF"}:{},children:"Winners"}),o.map(s=>e.jsx("button",{onClick:()=>f(s),className:`px-4 py-2 rounded-lg font-medium whitespace-nowrap transition-colors ${i===s?"text-white":"bg-white text-slate-700 hover:bg-slate-100"}`,style:i===s?{backgroundColor:"#732FDF"}:{},children:s},s))]}),i==="winners"?e.jsx(x,{}):i&&e.jsx(j,{league:i})]}),e.jsx("div",{className:"hidden md:grid md:grid-cols-2 gap-6",children:o.map(s=>e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-slate-800 mb-4",children:s}),e.jsx(j,{league:s})]},s))}),c&&e.jsx("div",{className:"fixed inset-0 bg-background bg-opacity-90 flex items-center justify-center p-4 z-50",onClick:()=>h(null),children:e.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full max-h-[90vh] overflow-y-auto",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-slate-200 px-6 py-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:l(c.name)}),e.jsx("button",{onClick:()=>h(null),className:"text-slate-400 hover:text-slate-600 text-2xl leading-none",children:"Ã—"})]}),e.jsx("p",{className:"text-sm text-slate-500 mt-1",children:n(c.created_at)}),e.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl font-bold text-emerald-600",children:c.total_score}),e.jsx("span",{className:"text-slate-600",children:"points"})]})]}),e.jsx("div",{className:"p-6",children:e.jsx(g,{player:c})})]})})]})})}function he(){return e.jsx(ee,{children:e.jsx(oe,{})})}export{he as default};
