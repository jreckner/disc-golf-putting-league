import{r as f,j as e}from"./index-7Y1qgM2T.js";import{w as P,r as v,x as j,v as w,D as $}from"./default-DOYrO9jP.js";function F(i){return P({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"6"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"2"},child:[]}]})(i)}function S(){const[i,o]=f.useState(null),[n,u]=f.useState(""),m=new Date().toISOString().slice(0,10),[x,y]=f.useState(m),{data:b=[]}=v({queryKey:["eventDates"],queryFn:async()=>(await fetch("https://apis.recknerd.com/vw_dgpl_event_dates")).json()}),{data:_,isLoading:k}=v({queryKey:["results",x],queryFn:async()=>(await fetch("https://apis.recknerd.com/dgpl_scores?event_at=eq."+x)).json(),refetchInterval:1e4});if(k)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"text-slate-600",children:"Loading leaderboard..."})});const h=s=>{const t=s.split(" ");if(t.length<2)return"Unknown";const a="*".repeat(t[0].length-1),l="*".repeat(t[1].length-1);return`${t[0][0]}${a} ${t[1][0]}${l}`},p=s=>new Date(s*1e3).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),c=_?.reduce((s,t)=>{const a=t.league||"General",l=p(t.created_at);return s[a]||(s[a]={}),s[a][l]||(s[a][l]=[]),s[a][l].push(t),s},{});Object.keys(c).forEach(s=>{Object.keys(c[s]).forEach(t=>{c[s][t].sort((a,l)=>l.total_score-a.total_score)})});const d=Object.keys(c);!n&&d.length>0&&u(d[0]);const g=s=>{u(s)};function D(){const s=d.map(t=>{const a=c[t],l=Object.values(a).flat();return l.sort((r,L)=>L.total_score-r.total_score),{league:t,player:l[0]}});return e.jsx("div",{className:"space-y-4",children:s.map(({league:t,player:a})=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200",children:[e.jsx("div",{className:"bg-gradient-to-r from-amber-50 to-yellow-50 px-4 py-3 border-b border-amber-200",children:e.jsxs("h3",{className:"font-semibold text-slate-700 flex items-center gap-2",children:[e.jsx(w,{className:"w-5 h-5 text-amber-500"}),j.find(l=>l.key===t)?.label," League Champion"]})}),e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full bg-amber-400 text-white font-bold text-lg",children:"1"}),e.jsx("span",{className:"font-semibold text-lg text-slate-800",children:h(a.name)})]}),e.jsx("button",{onClick:()=>o(a),className:"px-5 py-2 bg-amber-500 hover:bg-amber-600 text-white rounded-lg font-bold transition-colors cursor-pointer ring-2 ring-yellow-400 shadow-lg shadow-amber-300/50",children:a.total_score})]})})]},t))})}function C({player:s}){return e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{className:"bg-slate-50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-sm text-slate-700 mb-3",children:"Left Putts"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600",children:"10ft:"}),e.jsx("span",{className:"font-medium",children:s.left_putt_10ft})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600",children:"20ft:"}),e.jsx("span",{className:"font-medium",children:s.left_putt_20ft})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600",children:"30ft:"}),e.jsx("span",{className:"font-medium",children:s.left_putt_30ft})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600",children:"40ft:"}),e.jsx("span",{className:"font-medium",children:s.left_putt_40ft})]})]})]}),e.jsxs("div",{className:"bg-slate-50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-sm text-slate-700 mb-3",children:"Center Putts"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600",children:"10ft:"}),e.jsx("span",{className:"font-medium",children:s.center_putt_10ft})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600",children:"20ft:"}),e.jsx("span",{className:"font-medium",children:s.center_putt_20ft})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600",children:"30ft:"}),e.jsx("span",{className:"font-medium",children:s.center_putt_30ft})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600",children:"40ft:"}),e.jsx("span",{className:"font-medium",children:s.center_putt_40ft})]})]})]}),e.jsxs("div",{className:"bg-slate-50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-sm text-slate-700 mb-3",children:"Right Putts"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600",children:"10ft:"}),e.jsx("span",{className:"font-medium",children:s.right_putt_10ft})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600",children:"20ft:"}),e.jsx("span",{className:"font-medium",children:s.right_putt_20ft})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600",children:"30ft:"}),e.jsx("span",{className:"font-medium",children:s.right_putt_30ft})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600",children:"40ft:"}),e.jsx("span",{className:"font-medium",children:s.right_putt_40ft})]})]})]})]})}function N({league:s}){return e.jsx("div",{className:"space-y-6",children:Object.entries(c[s]).map(([t,a])=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200",children:[e.jsx("div",{className:"bg-slate-100 px-4 py-2 border-b border-slate-200",children:e.jsx("h3",{className:"font-semibold text-slate-700",children:t})}),e.jsx("div",{className:"divide-y divide-slate-200",children:a.map((l,r)=>e.jsxs("div",{className:`flex items-center justify-between px-4 py-3 transition-colors ${r===0?"bg-gradient-to-r from-amber-50 to-yellow-50 hover:from-amber-100 hover:to-yellow-100 border-l-4 border-amber-400":"hover:bg-slate-50"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`flex items-center justify-center w-8 h-8 rounded-full font-semibold text-sm ${r===0?"bg-amber-400 text-white":"bg-slate-200 text-slate-600"}`,children:r+1}),r===0&&e.jsx(w,{className:"w-5 h-5 text-amber-500"}),e.jsx("span",{className:"font-medium text-slate-800",children:h(l.name)})]}),e.jsx("button",{onClick:()=>o(l),className:`px-4 py-2 text-white rounded-lg font-semibold transition-colors cursor-pointer ${r===0?"bg-amber-500 hover:bg-amber-600 ring-2 ring-yellow-400 shadow-lg shadow-amber-300/50":"hover:opacity-90"}`,style:r!==0?{backgroundColor:"#732FDF"}:{},children:l.total_score})]},l.email))})]},t))})}return e.jsx("div",{className:"min-h-screen bg-background",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(F,{className:"w-8 h-8 text-emerald-600"}),e.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Putting Leaderboard"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("label",{className:"sr-only",htmlFor:"event-date-select",children:"Event Date"}),e.jsxs("select",{id:"event-date-select",value:x,onChange:s=>y(s.target.value),className:"ml-4 px-3 py-2 border rounded-md bg-white text-sm",children:[e.jsxs("option",{value:m,children:["Today (",m,")"]}),Array.isArray(b)&&b.map(s=>s.event_at).filter((s,t,a)=>a.indexOf(s)===t).map(s=>e.jsx("option",{value:s,children:s},s))]})]})]})}),e.jsxs("div",{className:"md:hidden mb-6",children:[e.jsxs("div",{className:"flex flex-wrap gap-3 pb-2 justify-center",children:[e.jsx("button",{onClick:()=>g("winners"),className:`px-4 py-2 rounded-lg font-medium whitespace-nowrap transition-colors ${n==="winners"?"text-white":"bg-white text-slate-700 hover:bg-slate-100"}`,style:n==="winners"?{backgroundColor:"#732FDF"}:{},children:"Winners"}),d.map(s=>e.jsx("button",{onClick:()=>g(s),className:`px-4 py-2 rounded-lg font-medium whitespace-nowrap transition-colors ${n===s?"text-white":"bg-white text-slate-700 hover:bg-slate-100"}`,style:n===s?{backgroundColor:"#732FDF"}:{},children:j.find(t=>t.key===s)?.label},s))]}),n==="winners"?e.jsx(D,{}):n&&e.jsx(N,{league:n})]}),e.jsx("div",{className:"hidden md:grid md:grid-cols-2 2xl:grid-cols-3 gap-6",children:d.map(s=>e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-slate-800 mb-4",children:j.find(t=>t.key===s)?.label}),e.jsx(N,{league:s})]},s))}),i&&e.jsx("div",{className:"fixed inset-0 bg-background bg-opacity-90 flex items-center justify-center p-4 z-50",onClick:()=>o(null),children:e.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full max-h-[90vh] overflow-y-auto",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-slate-200 px-6 py-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:h(i.name)}),e.jsx("button",{onClick:()=>o(null),className:"text-slate-400 hover:text-slate-600 text-2xl leading-none",children:"Ã—"})]}),e.jsx("p",{className:"text-sm text-slate-500 mt-1",children:p(i.created_at)}),e.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl font-bold text-emerald-600",children:i.total_score}),e.jsx("span",{className:"text-slate-600",children:"points"})]})]}),e.jsx("div",{className:"p-6",children:e.jsx(C,{player:i})})]})})]})})}function T(){return e.jsx($,{children:e.jsx(S,{})})}export{T as default};
